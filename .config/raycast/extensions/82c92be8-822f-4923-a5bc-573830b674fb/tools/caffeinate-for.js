"use strict";var o=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var g=(t,e)=>{for(var n in e)o(t,n,{get:e[n],enumerable:!0})},m=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of l(e))!p.call(t,s)&&s!==n&&o(t,s,{get:()=>e[s],enumerable:!(r=d(e,s))||r.enumerable});return t};var S=t=>m(o({},"__esModule",{value:!0}),t);var h={};g(h,{default:()=>b});module.exports=S(h);var a=require("@raycast/api"),i=require("node:child_process");async function c(t,e,n){e&&await(0,a.showHUD)(e),await w({menubar:!1,status:!1}),(0,i.exec)(`/usr/bin/caffeinate ${D(n)} || true`),await f(t,!0)}async function w(t,e){e&&await(0,a.showHUD)(e),(0,i.execSync)("/usr/bin/killall caffeinate || true"),await f(t,!1)}async function f(t,e){t.menubar&&await u("index",{caffeinated:e}),t.status&&await u("status",{caffeinated:e})}async function u(t,e){try{await(0,a.launchCommand)({name:t,type:a.LaunchType.Background,context:e})}catch{}}function D(t){let e=(0,a.getPreferenceValues)(),n=[];return e.preventDisplay&&n.push("d"),e.preventDisk&&n.push("m"),e.preventSystem&&n.push("i"),t&&n.push(` ${t}`),n.length>0?`-${n.join("")}`:""}async function b(t){let{hours:e=0,minutes:n=0,seconds:r=0}=t;if(e===0&&n===0&&r===0)throw new Error("Please specify a duration");let s=e*3600+n*60+r,y=`${e?`${e}h`:""}${n?`${n}m`:""}${r?`${r}s`:""}`;return await c({menubar:!0,status:!0},void 0,`-t ${s}`),`Mac will stay awake for ${y}`}
